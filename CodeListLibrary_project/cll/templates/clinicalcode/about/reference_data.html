{% extends "base.html" %}

{% load static %}
{% load compress %}
{% load sass_tags %}
{% load cl_extras %}
{% load breadcrumbs %}
{% load entity_renderer %}

{% block title %}| Reference Data {% endblock title %}

{% block container %}
  <!-- Vendor -->
  <script src="{% static 'js/lib/moment.min.js' %}"></script>
  <script src="{% static 'js/lib/eleTree.min.js' %}"></script>
  <script src="{% static 'js/lib/simple-datatables/simple-datatables.min.js' %}"></script>

  <!-- Dependencies -->
  {% compress js %}
    <script type="module" src="{% static 'js/clinicalcode/services/referenceDataService.js' %}"></script>
  {% endcompress %}

  <!-- Page Stylesheets -->
  {% compress css %}
    <link rel="stylesheet" href="{% sass_src 'scss/pages/about.scss' %}" type="text/css" />
  {% endcompress %}

  <!-- Main -->
  {% get_brand_map_rules as brand_mapping %}
  {% get_brand_base_title request.BRAND_OBJECT as base_page_title %}
  <header class="main-header banner">
    <div class="main-header__inner-container main-header__inner-container--constrained-no-pad main-header__inner-container--centred">
      <div class="banner__container">
        <h2 class="banner__title">Reference Data</h2>
        <p class="banner__description">
          Look up values for {{ brand_mapping.phenotype }} fields.
        </p>
        <div class="banner__cards">
          <div class="hstack-cards-banner hstack-cards-banner-justify-content-space-evenly slim-scrollbar">
            {% url 'api:root' as api_url %}
            <article
                class="referral-card referral-card referral-card-fill-area-evenly bright-accent referral-card-shadow referral-card-border-radius referral-card-no-margin"
                data-target="{{ api_url }}"
                onclick="redirectToTarget(this, event);"
                tabindex="0"
                role="button"
                aria-label="Visit API documentation">
              <div class="referral-card__header">
                <p class="referral-card__title" href="{{ api_url }}">API Documentation<span class="referral-card__title-icon"></span></p>
              </div>
              <div class="referral-card__body">
                <p>View the API documentation.</p>
              </div>
            </article>
            {% url 'create_phenotype' as create_url %}
            {% if USER_CREATE_CONTEXT %}
              <article
                  class="referral-card referral-card referral-card-fill-area-evenly bright-accent referral-card-shadow referral-card-border-radius referral-card-no-margin"
                  data-target="{{ create_url }}"
                  onclick="redirectToTarget(this, event);"
                  tabindex="0"
                  role="button"
                  aria-label="Create a {{ brand_mapping.phenotype }}">
                <div class="referral-card__header">
                  <p class="referral-card__title" href="{{ create_url }}">Create a {{ brand_mapping.phenotype }}<span class="referral-card__title-icon"></span></p>
                </div>
                <div class="referral-card__body">
                  <p>Start here to contribute to the {{ base_page_title }}.</p>
                </div>
              </article>
            {% endif %}
            {% url 'search_entities' as search_url %}
            <article
                class="referral-card referral-card referral-card-fill-area-evenly bright-accent referral-card-shadow referral-card-border-radius referral-card-no-margin"
                data-target="{{ search_url }}"
                onclick="redirectToTarget(this, event);"
                tabindex="0"
                role="button"
                aria-label="Visit {{ brand_mapping.phenotype }} Search">
              <div class="referral-card__header">
                <p class="referral-card__title" href="{{ search_url }}">Search {{ brand_mapping.phenotype }}s<span class="referral-card__title-icon"></span></p>
              </div>
              <div class="referral-card__body">
                <p>Find {{ brand_mapping.phenotype }}s within the {{ base_page_title }}.</p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="main-content__inner-container main-content__inner-container--constrained main-content__inner-container--centred">
      <article class="reference-collection">
        {% if tags and tags|length > 0 %}
          <section class="reference-collection__inner-container" id="tags">
            {% to_json_script tags data-owner="reference-data-service" name="tags" desc-type="text/json" %}
            <h3>Tags</h3>
            <p>Optional keywords helping to categorize this content.</p>
            <div class="reference-collection__table-container constrained-codelist-table" id="tags-area">

            </div>
          </section>
        {% endif %}

        {% if collections and collections|length > 0 %}
          <section class="reference-collection__inner-container" id="collections">
            {% to_json_script collections data-owner="reference-data-service" name="collections" desc-type="text/json" %}
            <h3>Collections</h3>
            <p>List of content collections this {{ brand_mapping.phenotype }} belongs to.</p>
            <div class="reference-collection__table-container constrained-codelist-table" id="collections-area">

            </div>
          </section>
        {% endif %}

        {% if coding_system and coding_system|length > 0 %}
          <section class="reference-collection__inner-container" id="coding_system">
            {% to_json_script coding_system data-owner="reference-data-service" name="coding_system" desc-type="text/json" %}
            <h3>Coding Systems</h3>
            <p>Clinical coding system(s) that relate to {{ brand_mapping.phenotype }}s.</p>
            <div class="reference-collection__table-container constrained-codelist-table" id="coding-systems-area">

            </div>
          </section>
        {% endif %}

        {% if data_sources and data_sources|length > 0 %}
          <section class="reference-collection__inner-container" id="data_sources">
              {% to_json_script data_sources data-owner="reference-data-service" name="data_sources" desc-type="text/json" %}
            <h3>Data Sources</h3>
            <p>Data sources the {{ brand_mapping.phenotype }} creators have run this {{ brand_mapping.phenotype }} against; or view as appropriate to use this {{ brand_mapping.phenotype }} for.</p>
            <div class="reference-collection__table-container constrained-codelist-table" id="data-sources-area">

            </div>
          </section>
        {% endif %}

        {% if ontology_groups %}
          <section class="reference-collection__inner-container" id="ontology">
            {% to_json_script ontology_groups data-owner="reference-data-service" name="ontology-groups" desc-type="text/json" %}

            <h3>Ontology</h3>
            <p>A set of taggable categories and concepts that describes a {{ brand_mapping.phenotype }}.</p>

            <div class="reference-collection__table-container constrained-codelist-table" id="ontology-area" type="tree">
              <div class="tab-view" id="tab-view">
                <div class="tab-view__tabs tab-view__tabs-z-buffer" id="tab-items">
                  
                </div>
                <div class="tab-view__content" id="tab-content">

                </div>
              </div>
            </div>
          </section>
        {% endif %}

      </article>
    </div>
  </main>

{% endblock container %}
