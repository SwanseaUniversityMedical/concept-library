{% load entity_renderer %}

<div class="detailed-input-group fill">
  <h3 class="detailed-input-group__title">
    {{ component.field_data.title }}
    {% if component.mandatory %}
      <span class="detailed-input-group__mandatory">*</span>
    {% endif %}
  </h3>
  {% if not component.hide_input_details %}
    <pre class="detailed-input-group__description">{{ component.description }}</pre>
  {% endif %}

  <div class="var-selection-group" data-class="var_array" data-field="{{ component.field_name }}">
    {% if component.value %}
      {% to_json_script component.value data-type="value" for=component.field_name %}
    {% else %}
      <script type="application/json" data-type="value" for="{{ component.field_name }}"></script>
    {% endif %}

    {% if component.options %}
      {% to_json_script component.options data-type="options" for=component.field_name %}
    {% else %}
      <script type="application/json" data-type="options" for="{{ component.field_name }}"></script>
    {% endif %}

    {% if component.properties %}
      {% to_json_script component.properties data-type="properties" for=component.field_name %}
    {% else %}
      <script type="application/json" data-type="properties" for="{{ component.field_name }}"></script>
    {% endif %}

    <header class="var-selection-group__interface" id="var-interface">
      {% if component.appearance and component.appearance.btn %}
        <button
            id="add-btn"
            class="primary-btn text-accent-darkest bold secondary-accent"
            data-role="addBtn"
            aria-label="{{ component.appearance.btn.label }}">
            {{ component.appearance.btn.label }}
            {% if component.appearance.btn.icon %}
              <span class="as-icon" data-icon="{{ component.appearance.btn.icon|safe }}" aria-hidden="true"></span>
            {% endif %}
        </button>
      {% else %}
        <button
            id="add-btn"
            class="primary-btn text-accent-darkest bold secondary-accent"
            data-role="addBtn"
            aria-label="Add New {{ component.field_data.title }}">
          Create New
          <span class="as-icon" data-icon="&#xf1ec;" aria-hidden="true"></span>
        </button>
      {% endif %}
    </header>

    <section
        id="none-available"
        class="var-selection-group__none-available show"
        data-role="noneAvailable">
      <p class="var-selection-group__none-available-message">
        You haven't added any {{ component.field_data.title }} yet.
      </p>
    </section>

    <section
        id="var-group"
        class="var-selection-group__list"
        data-role="contentGroup">
      <header id="var-header" class="var-selection-group__list-header">
        <h3>
          Your {{ component.field_data.title }}
        </h3>
      </header>
      <div
          id="var-list"
          class="var-selection-group__list-container slim-scrollbar"
          data-role="contentList">
        
      </div>
    </section>

    <template data-name="panel" data-view="vinterface">
      <section class="var-selection">
        <header class="var-selection__header">
          <div class="var-selection__header-group">
            <p class="var-selection__header-label">
              ${title}
            </p>
            <select
              id="tmpl-selector"
              class="selection-input"
              aria-label="${title}"
            >
              <option value="-1" disabled selected hidden>
                ${label}
              </option>
            </select>
          </div>
        </header>
        <section
          class="var-selection__content"
          data-role="content"
        >

        </section>
      </section>
    </template>

    <template data-name="number" data-view="inputs">
      <div class="input-field-container number-input" data-ctrl="number" data-ref="${ref}">
        <p class="input-field-container__label">
          ${label}
        </p>
        <div class="number-input__group">
          <div class="number-input__group-inner">
            <input
              id="${id}"
              name="${ref}"
              class="number-input__group-input"
              type="number"
              value="${value}"
              ${step}
              ${rangemin}
              ${rangemax}
              tabindex="0"
              placeholder="${placeholder}"
              aria-label="Enter number value"
              data-step="${btnStep}"
              data-type="${type}"
            />
            <span class="as-icon" aria-hidden="true"></span>
          </div>
          <div class="number-input__group-spin">
            <button
              class="number-input__group-action"
              type="button"
              role="button"
              tabindex="0"
              title="Increase number value"
              aria-label="Increase number value"
              data-op="increment"
              data-ref="${ref}"
              data-role="button"
            >
            </button>
            <button
              class="number-input__group-action"
              type="button"
              role="button"
              tabindex="0"
              title="Decrease number value"
              aria-label="Decrease number value"
              data-op="decrement"
              data-ref="${ref}"
              data-role="button"
            >
            </button>
          </div>
        </div>
      </div>
    </template>

    <template data-name="inputbox" data-view="inputs">
      <div class="input-field-container" data-ctrl="inputbox" data-ref="${ref}">
        <p class="input-field-container__label">
          ${label}
        </p>
        <input
          id="${id}"
          name="${ref}"
          class="text-input input-field-container__input"
          value="${value}"
          placeholder="${placeholder}"
          aria-label="Text field"
        />
      </div>
    </template>
  </div>
</div>
