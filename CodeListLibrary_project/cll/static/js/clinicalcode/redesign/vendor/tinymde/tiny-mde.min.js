!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyMDE={})}(this,(function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=new RegExp(e,n);return t.set(a,i||t.get(e)),s(a,r.prototype)}function i(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[n]=e[i[a]]}return t}),Object.create(null))}return o(r,RegExp),r.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=i(n,this);var r=n.indices;r&&(r.groups=i(r,this))}return n},r.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var a=t.get(this);return e[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(e,t){var n=a[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof r){var o=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(i(e,o)),r.apply(this,e)}))}return e[Symbol.replace].call(this,n,r)},n.apply(this,arguments)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=function(e){return e&&e.Math==Math&&e},d=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof p&&p)||function(){return this}()||Function("return this")(),g={},m=function(e){try{return!!e()}catch(e){return!0}},v=!m((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y=!m((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),M=y,T=Function.prototype.call,b=M?T.bind(T):function(){return T.apply(T,arguments)},F={},D={}.propertyIsEnumerable,k=Object.getOwnPropertyDescriptor,C=k&&!D.call({1:2},1);F.f=C?function(e){var t=k(this,e);return!!t&&t.enumerable}:D;var E,x,w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},A=y,S=Function.prototype,$=S.call,L=A&&S.bind.bind($,$),O=A?L:function(e){return function(){return $.apply(e,arguments)}},I=O,B=I({}.toString),_=I("".slice),N=function(e){return _(B(e),8,-1)},H=N,P=O,j=function(e){if("Function"===H(e))return P(e)},R=m,z=N,U=Object,q=j("".split),K=R((function(){return!U("z").propertyIsEnumerable(0)}))?function(e){return"String"==z(e)?q(e,""):U(e)}:U,V=function(e){return null==e},Z=V,W=TypeError,Y=function(e){if(Z(e))throw W("Can't call method on "+e);return e},G=K,X=Y,Q=function(e){return G(X(e))},J="object"==typeof document&&document.all,ee={all:J,IS_HTMLDDA:void 0===J&&void 0!==J},te=ee.all,ne=ee.IS_HTMLDDA?function(e){return"function"==typeof e||e===te}:function(e){return"function"==typeof e},re=ne,ie=ee.all,ae=ee.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:re(e)||e===ie}:function(e){return"object"==typeof e?null!==e:re(e)},oe=d,se=ne,ue=function(e){return se(e)?e:void 0},le=function(e,t){return arguments.length<2?ue(oe[e]):oe[e]&&oe[e][t]},ce=j({}.isPrototypeOf),he=d,pe=le("navigator","userAgent")||"",fe=he.process,de=he.Deno,ge=fe&&fe.versions||de&&de.version,me=ge&&ge.v8;me&&(x=(E=me.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!x&&pe&&(!(E=pe.match(/Edge\/(\d+)/))||E[1]>=74)&&(E=pe.match(/Chrome\/(\d+)/))&&(x=+E[1]);var ve=x,ye=ve,Me=m,Te=!!Object.getOwnPropertySymbols&&!Me((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ye&&ye<41})),be=Te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Fe=le,De=ne,ke=ce,Ce=Object,Ee=be?function(e){return"symbol"==typeof e}:function(e){var t=Fe("Symbol");return De(t)&&ke(t.prototype,Ce(e))},xe=String,we=function(e){try{return xe(e)}catch(e){return"Object"}},Ae=ne,Se=we,$e=TypeError,Le=function(e){if(Ae(e))return e;throw $e(Se(e)+" is not a function")},Oe=V,Ie=function(e,t){var n=e[t];return Oe(n)?void 0:Le(n)},Be=b,_e=ne,Ne=ae,He=TypeError,Pe={exports:{}},je=d,Re=Object.defineProperty,ze=function(e,t){try{Re(je,e,{value:t,configurable:!0,writable:!0})}catch(n){je[e]=t}return t},Ue=ze,qe="__core-js_shared__",Ke=d[qe]||Ue(qe,{}),Ve=Ke;(Pe.exports=function(e,t){return Ve[e]||(Ve[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.0",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Ze=Y,We=Object,Ye=function(e){return We(Ze(e))},Ge=Ye,Xe=j({}.hasOwnProperty),Qe=Object.hasOwn||function(e,t){return Xe(Ge(e),t)},Je=j,et=0,tt=Math.random(),nt=Je(1..toString),rt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+nt(++et+tt,36)},it=d,at=Pe.exports,ot=Qe,st=rt,ut=Te,lt=be,ct=at("wks"),ht=it.Symbol,pt=ht&&ht.for,ft=lt?ht:ht&&ht.withoutSetter||st,dt=function(e){if(!ot(ct,e)||!ut&&"string"!=typeof ct[e]){var t="Symbol."+e;ut&&ot(ht,e)?ct[e]=ht[e]:ct[e]=lt&&pt?pt(t):ft(t)}return ct[e]},gt=b,mt=ae,vt=Ee,yt=Ie,Mt=function(e,t){var n,r;if("string"===t&&_e(n=e.toString)&&!Ne(r=Be(n,e)))return r;if(_e(n=e.valueOf)&&!Ne(r=Be(n,e)))return r;if("string"!==t&&_e(n=e.toString)&&!Ne(r=Be(n,e)))return r;throw He("Can't convert object to primitive value")},Tt=TypeError,bt=dt("toPrimitive"),Ft=function(e,t){if(!mt(e)||vt(e))return e;var n,r=yt(e,bt);if(r){if(void 0===t&&(t="default"),n=gt(r,e,t),!mt(n)||vt(n))return n;throw Tt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Mt(e,t)},Dt=Ee,kt=function(e){var t=Ft(e,"string");return Dt(t)?t:t+""},Ct=ae,Et=d.document,xt=Ct(Et)&&Ct(Et.createElement),wt=function(e){return xt?Et.createElement(e):{}},At=wt,St=!v&&!m((function(){return 7!=Object.defineProperty(At("div"),"a",{get:function(){return 7}}).a})),$t=v,Lt=b,Ot=F,It=w,Bt=Q,_t=kt,Nt=Qe,Ht=St,Pt=Object.getOwnPropertyDescriptor;g.f=$t?Pt:function(e,t){if(e=Bt(e),t=_t(t),Ht)try{return Pt(e,t)}catch(e){}if(Nt(e,t))return It(!Lt(Ot.f,e,t),e[t])};var jt={},Rt=v&&m((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),zt=ae,Ut=String,qt=TypeError,Kt=function(e){if(zt(e))return e;throw qt(Ut(e)+" is not an object")},Vt=v,Zt=St,Wt=Rt,Yt=Kt,Gt=kt,Xt=TypeError,Qt=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor,en="enumerable",tn="configurable",nn="writable";jt.f=Vt?Wt?function(e,t,n){if(Yt(e),t=Gt(t),Yt(n),"function"==typeof e&&"prototype"===t&&"value"in n&&nn in n&&!n.writable){var r=Jt(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:tn in n?n.configurable:r.configurable,enumerable:en in n?n.enumerable:r.enumerable,writable:!1})}return Qt(e,t,n)}:Qt:function(e,t,n){if(Yt(e),t=Gt(t),Yt(n),Zt)try{return Qt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Xt("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var rn=jt,an=w,on=v?function(e,t,n){return rn.f(e,t,an(1,n))}:function(e,t,n){return e[t]=n,e},sn={exports:{}},un=v,ln=Qe,cn=Function.prototype,hn=un&&Object.getOwnPropertyDescriptor,pn=ln(cn,"name"),fn={EXISTS:pn,PROPER:pn&&"something"===function(){}.name,CONFIGURABLE:pn&&(!un||un&&hn(cn,"name").configurable)},dn=ne,gn=Ke,mn=j(Function.toString);dn(gn.inspectSource)||(gn.inspectSource=function(e){return mn(e)});var vn,yn,Mn,Tn=gn.inspectSource,bn=ne,Fn=d.WeakMap,Dn=bn(Fn)&&/native code/.test(String(Fn)),kn=Pe.exports,Cn=rt,En=kn("keys"),xn=function(e){return En[e]||(En[e]=Cn(e))},wn={},An=Dn,Sn=d,$n=ae,Ln=on,On=Qe,In=Ke,Bn=xn,_n=wn,Nn="Object already initialized",Hn=Sn.TypeError,Pn=Sn.WeakMap;if(An||In.state){var jn=In.state||(In.state=new Pn);jn.get=jn.get,jn.has=jn.has,jn.set=jn.set,vn=function(e,t){if(jn.has(e))throw Hn(Nn);return t.facade=e,jn.set(e,t),t},yn=function(e){return jn.get(e)||{}},Mn=function(e){return jn.has(e)}}else{var Rn=Bn("state");_n[Rn]=!0,vn=function(e,t){if(On(e,Rn))throw Hn(Nn);return t.facade=e,Ln(e,Rn,t),t},yn=function(e){return On(e,Rn)?e[Rn]:{}},Mn=function(e){return On(e,Rn)}}var zn={set:vn,get:yn,has:Mn,enforce:function(e){return Mn(e)?yn(e):vn(e,{})},getterFor:function(e){return function(t){var n;if(!$n(t)||(n=yn(t)).type!==e)throw Hn("Incompatible receiver, "+e+" required");return n}}},Un=m,qn=ne,Kn=Qe,Vn=v,Zn=fn.CONFIGURABLE,Wn=Tn,Yn=zn.enforce,Gn=zn.get,Xn=Object.defineProperty,Qn=Vn&&!Un((function(){return 8!==Xn((function(){}),"length",{value:8}).length})),Jn=String(String).split("String"),er=sn.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Kn(e,"name")||Zn&&e.name!==t)&&(Vn?Xn(e,"name",{value:t,configurable:!0}):e.name=t),Qn&&n&&Kn(n,"arity")&&e.length!==n.arity&&Xn(e,"length",{value:n.arity});try{n&&Kn(n,"constructor")&&n.constructor?Vn&&Xn(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=Yn(e);return Kn(r,"source")||(r.source=Jn.join("string"==typeof t?t:"")),e};Function.prototype.toString=er((function(){return qn(this)&&Gn(this).source||Wn(this)}),"toString");var tr=ne,nr=jt,rr=sn.exports,ir=ze,ar=function(e,t,n,r){r||(r={});var i=r.enumerable,a=void 0!==r.name?r.name:t;if(tr(n)&&rr(n,a,r),r.global)i?e[t]=n:ir(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:nr.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},or={},sr=Math.ceil,ur=Math.floor,lr=Math.trunc||function(e){var t=+e;return(t>0?ur:sr)(t)},cr=function(e){var t=+e;return t!=t||0===t?0:lr(t)},hr=cr,pr=Math.max,fr=Math.min,dr=function(e,t){var n=hr(e);return n<0?pr(n+t,0):fr(n,t)},gr=cr,mr=Math.min,vr=function(e){return e>0?mr(gr(e),9007199254740991):0},yr=vr,Mr=function(e){return yr(e.length)},Tr=Q,br=dr,Fr=Mr,Dr=function(e){return function(t,n,r){var i,a=Tr(t),o=Fr(a),s=br(r,o);if(e&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},kr={includes:Dr(!0),indexOf:Dr(!1)},Cr=Qe,Er=Q,xr=kr.indexOf,wr=wn,Ar=j([].push),Sr=function(e,t){var n,r=Er(e),i=0,a=[];for(n in r)!Cr(wr,n)&&Cr(r,n)&&Ar(a,n);for(;t.length>i;)Cr(r,n=t[i++])&&(~xr(a,n)||Ar(a,n));return a},$r=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lr=Sr,Or=$r.concat("length","prototype");or.f=Object.getOwnPropertyNames||function(e){return Lr(e,Or)};var Ir={};Ir.f=Object.getOwnPropertySymbols;var Br=le,_r=or,Nr=Ir,Hr=Kt,Pr=j([].concat),jr=Br("Reflect","ownKeys")||function(e){var t=_r.f(Hr(e)),n=Nr.f;return n?Pr(t,n(e)):t},Rr=Qe,zr=jr,Ur=g,qr=jt,Kr=m,Vr=ne,Zr=/#|\.prototype\./,Wr=function(e,t){var n=Gr[Yr(e)];return n==Qr||n!=Xr&&(Vr(t)?Kr(t):!!t)},Yr=Wr.normalize=function(e){return String(e).replace(Zr,".").toLowerCase()},Gr=Wr.data={},Xr=Wr.NATIVE="N",Qr=Wr.POLYFILL="P",Jr=Wr,ei=d,ti=g.f,ni=on,ri=ar,ii=ze,ai=function(e,t,n){for(var r=zr(t),i=qr.f,a=Ur.f,o=0;o<r.length;o++){var s=r[o];Rr(e,s)||n&&Rr(n,s)||i(e,s,a(t,s))}},oi=Jr,si=function(e,t){var n,r,i,a,o,s=e.target,u=e.global,l=e.stat;if(n=u?ei:l?ei[s]||ii(s,{}):(ei[s]||{}).prototype)for(r in t){if(a=t[r],i=e.dontCallGetSet?(o=ti(n,r))&&o.value:n[r],!oi(u?r:s+(l?".":"#")+r,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;ai(a,i)}(e.sham||i&&i.sham)&&ni(a,"sham",!0),ri(n,r,a,e)}},ui={};ui[dt("toStringTag")]="z";var li="[object z]"===String(ui),ci=ne,hi=N,pi=dt("toStringTag"),fi=Object,di="Arguments"==hi(function(){return arguments}()),gi=li?hi:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=fi(e),pi))?n:di?hi(t):"Object"==(r=hi(t))&&ci(t.callee)?"Arguments":r},mi=gi,vi=String,yi=function(e){if("Symbol"===mi(e))throw TypeError("Cannot convert a Symbol value to a string");return vi(e)},Mi=Kt,Ti=function(){var e=Mi(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},bi=m,Fi=d.RegExp,Di=bi((function(){var e=Fi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),ki=Di||bi((function(){return!Fi("a","y").sticky})),Ci=Di||bi((function(){var e=Fi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Ei={BROKEN_CARET:Ci,MISSED_STICKY:ki,UNSUPPORTED_Y:Di},xi={},wi=Sr,Ai=$r,Si=Object.keys||function(e){return wi(e,Ai)},$i=v,Li=Rt,Oi=jt,Ii=Kt,Bi=Q,_i=Si;xi.f=$i&&!Li?Object.defineProperties:function(e,t){Ii(e);for(var n,r=Bi(t),i=_i(t),a=i.length,o=0;a>o;)Oi.f(e,n=i[o++],r[n]);return e};var Ni,Hi=le("document","documentElement"),Pi=Kt,ji=xi,Ri=$r,zi=wn,Ui=Hi,qi=wt,Ki=xn("IE_PROTO"),Vi=function(){},Zi=function(e){return"<script>"+e+"</"+"script>"},Wi=function(e){e.write(Zi("")),e.close();var t=e.parentWindow.Object;return e=null,t},Yi=function(){try{Ni=new ActiveXObject("htmlfile")}catch(e){}var e,t;Yi="undefined"!=typeof document?document.domain&&Ni?Wi(Ni):((t=qi("iframe")).style.display="none",Ui.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Zi("document.F=Object")),e.close(),e.F):Wi(Ni);for(var n=Ri.length;n--;)delete Yi.prototype[Ri[n]];return Yi()};zi[Ki]=!0;var Gi=Object.create||function(e,t){var n;return null!==e?(Vi.prototype=Pi(e),n=new Vi,Vi.prototype=null,n[Ki]=e):n=Yi(),void 0===t?n:ji.f(n,t)},Xi=m,Qi=d.RegExp,Ji=Xi((function(){var e=Qi(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),ea=m,ta=d.RegExp,na=ea((function(){var e=ta("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ra=b,ia=j,aa=yi,oa=Ti,sa=Ei,ua=Pe.exports,la=Gi,ca=zn.get,ha=Ji,pa=na,fa=ua("native-string-replace",String.prototype.replace),da=RegExp.prototype.exec,ga=da,ma=ia("".charAt),va=ia("".indexOf),ya=ia("".replace),Ma=ia("".slice),Ta=function(){var e=/a/,t=/b*/g;return ra(da,e,"a"),ra(da,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),ba=sa.BROKEN_CARET,Fa=void 0!==/()??/.exec("")[1];(Ta||Fa||ba||ha||pa)&&(ga=function(e){var t,n,r,i,a,o,s,u=this,l=ca(u),c=aa(e),h=l.raw;if(h)return h.lastIndex=u.lastIndex,t=ra(ga,h,c),u.lastIndex=h.lastIndex,t;var p=l.groups,f=ba&&u.sticky,d=ra(oa,u),g=u.source,m=0,v=c;if(f&&(d=ya(d,"y",""),-1===va(d,"g")&&(d+="g"),v=Ma(c,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==ma(c,u.lastIndex-1))&&(g="(?: "+g+")",v=" "+v,m++),n=new RegExp("^(?:"+g+")",d)),Fa&&(n=new RegExp("^"+g+"$(?!\\s)",d)),Ta&&(r=u.lastIndex),i=ra(da,f?n:u,v),f?i?(i.input=Ma(i.input,m),i[0]=Ma(i[0],m),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:Ta&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),Fa&&i&&i.length>1&&ra(fa,i[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&p)for(i.groups=o=la(null),a=0;a<p.length;a++)o[(s=p[a])[0]]=i[s[1]];return i});var Da=ga;si({target:"RegExp",proto:!0,forced:/./.exec!==Da},{exec:Da});var ka=v,Ca=j,Ea=b,xa=m,wa=Si,Aa=Ir,Sa=F,$a=Ye,La=K,Oa=Object.assign,Ia=Object.defineProperty,Ba=Ca([].concat),_a=!Oa||xa((function(){if(ka&&1!==Oa({b:1},Oa(Ia({},"a",{enumerable:!0,get:function(){Ia(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Oa({},e)[n]||wa(Oa({},t)).join("")!=r}))?function(e,t){for(var n=$a(e),r=arguments.length,i=1,a=Aa.f,o=Sa.f;r>i;)for(var s,u=La(arguments[i++]),l=a?Ba(wa(u),a(u)):wa(u),c=l.length,h=0;c>h;)s=l[h++],ka&&!Ea(o,u,s)||(n[s]=u[s]);return n}:Oa,Na=_a;si({target:"Object",stat:!0,arity:2,forced:Object.assign!==Na},{assign:Na});var Ha=j,Pa=ar,ja=Da,Ra=m,za=dt,Ua=on,qa=za("species"),Ka=RegExp.prototype,Va=function(e,t,n,r){var i=za(e),a=!Ra((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),o=a&&!Ra((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[qa]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!a||!o||n){var s=Ha(/./[i]),u=t(i,""[e],(function(e,t,n,r,i){var o=Ha(e),u=t.exec;return u===ja||u===Ka.exec?a&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}}));Pa(String.prototype,e,u[0]),Pa(Ka,i,u[1])}r&&Ua(Ka[i],"sham",!0)},Za=j,Wa=cr,Ya=yi,Ga=Y,Xa=Za("".charAt),Qa=Za("".charCodeAt),Ja=Za("".slice),eo=function(e){return function(t,n){var r,i,a=Ya(Ga(t)),o=Wa(n),s=a.length;return o<0||o>=s?e?"":void 0:(r=Qa(a,o))<55296||r>56319||o+1===s||(i=Qa(a,o+1))<56320||i>57343?e?Xa(a,o):r:e?Ja(a,o,o+2):i-56320+(r-55296<<10)+65536}},to={codeAt:eo(!1),charAt:eo(!0)}.charAt,no=function(e,t,n){return t+(n?to(e,t).length:1)},ro=b,io=Kt,ao=ne,oo=N,so=Da,uo=TypeError,lo=function(e,t){var n=e.exec;if(ao(n)){var r=ro(n,e,t);return null!==r&&io(r),r}if("RegExp"===oo(e))return ro(so,e,t);throw uo("RegExp#exec called on incompatible receiver")},co=b,ho=Kt,po=V,fo=vr,go=yi,mo=Y,vo=Ie,yo=no,Mo=lo;Va("match",(function(e,t,n){return[function(t){var n=mo(this),r=po(t)?void 0:vo(t,e);return r?co(r,t,n):new RegExp(t)[e](go(n))},function(e){var r=ho(this),i=go(e),a=n(t,r,i);if(a.done)return a.value;if(!r.global)return Mo(r,i);var o=r.unicode;r.lastIndex=0;for(var s,u=[],l=0;null!==(s=Mo(r,i));){var c=go(s[0]);u[l]=c,""===c&&(r.lastIndex=yo(i,fo(r.lastIndex),o)),l++}return 0===l?null:u}]}));var To=N,bo=Array.isArray||function(e){return"Array"==To(e)},Fo=TypeError,Do=function(e){if(e>9007199254740991)throw Fo("Maximum allowed index exceeded");return e},ko=kt,Co=jt,Eo=w,xo=function(e,t,n){var r=ko(t);r in e?Co.f(e,r,Eo(0,n)):e[r]=n},wo=j,Ao=m,So=ne,$o=gi,Lo=Tn,Oo=function(){},Io=[],Bo=le("Reflect","construct"),_o=/^\s*(?:class|function)\b/,No=wo(_o.exec),Ho=!_o.exec(Oo),Po=function(e){if(!So(e))return!1;try{return Bo(Oo,Io,e),!0}catch(e){return!1}},jo=function(e){if(!So(e))return!1;switch($o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ho||!!No(_o,Lo(e))}catch(e){return!0}};jo.sham=!0;var Ro=!Bo||Ao((function(){var e;return Po(Po.call)||!Po(Object)||!Po((function(){e=!0}))||e}))?jo:Po,zo=bo,Uo=Ro,qo=ae,Ko=dt("species"),Vo=Array,Zo=function(e){var t;return zo(e)&&(t=e.constructor,(Uo(t)&&(t===Vo||zo(t.prototype))||qo(t)&&null===(t=t[Ko]))&&(t=void 0)),void 0===t?Vo:t},Wo=function(e,t){return new(Zo(e))(0===t?0:t)},Yo=m,Go=ve,Xo=dt("species"),Qo=function(e){return Go>=51||!Yo((function(){var t=[];return(t.constructor={})[Xo]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Jo=si,es=m,ts=bo,ns=ae,rs=Ye,is=Mr,as=Do,os=xo,ss=Wo,us=Qo,ls=ve,cs=dt("isConcatSpreadable"),hs=ls>=51||!es((function(){var e=[];return e[cs]=!1,e.concat()[0]!==e})),ps=us("concat"),fs=function(e){if(!ns(e))return!1;var t=e[cs];return void 0!==t?!!t:ts(e)};Jo({target:"Array",proto:!0,arity:1,forced:!hs||!ps},{concat:function(e){var t,n,r,i,a,o=rs(this),s=ss(o,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(fs(a=-1===t?o:arguments[t]))for(i=is(a),as(u+i),n=0;n<i;n++,u++)n in a&&os(s,u,a[n]);else as(u+1),os(s,u++,a);return s.length=u,s}});var ds='<svg height="18" width="18"><rect width="5" height="5" x="3" y="4" ry="1"/><rect ry="1" y="4" x="10" height="5" width="5"/><path d="M8 6.999v3c0 1-1 3-1 3s-.331 1-1.331 1h-1c-1 0-.669-1-.669-1s1-2 1-3v-3zm7 0v3c0 1-1 3-1 3s-.331 1-1.331 1h-1c-1 0-.669-1-.669-1s1-2 1-3v-3z"/></svg>',gs='<svg height="18" width="18"><path d="M4 2a1 1 0 00-1 1v12a1 1 0 001 1h6c4 0 5-2 5-4 0-1.322-.434-2.636-1.885-3.381C13.772 7.885 14 6.945 14 6c0-2-1-4-5-4zm1 2h4c1.668 0 2.32.393 2.6.672.28.279.4.662.4 1.328s-.12 1.057-.4 1.338c-.275.274-1.014.646-2.6.662H5zm5 6c1.666.005 2.318.388 2.596.666.277.278.404.667.404 1.334s-.127 1.06-.404 1.338c-.278.278-.93.66-2.596.662l-4.992.004L5 10z"/></svg>',ms='<svg height="18" width="18"><path d="M13.5 2.994a.5.5 0 00-.5.5.5.5 0 000 .034V4.53a5.993 5.993 0 00-7.451-.445A6 6 0 1012.45 13.9a5.99 5.99 0 001.346-1.334.5.5 0 00.096-.101.5.5 0 00-.12-.698.5.5 0 00-.697.12l-.004-.005a5 5 0 01-1.197 1.2 5 5 0 111.215-6.965.5.5 0 00.697.12.5.5 0 00.211-.44V4.745H14V3.493a.5.5 0 00-.5-.5z"/></svg>',vs='<svg height="18" width="18"><path d="M3 2s0-1 1-1h1c1 0 1 1 1 1v6h6V2s0-1 1-1h1c1 0 1 1 1 1v14s0 1-1 1h-1c-1 0-1-1-1-1v-6H6v6s0 1-1 1H4c-1 0-1-1-1-1z"/></svg>',ys='<svg height="18" width="18"><path d="M4 2s0-1 1-1 1 1 1 1v6c1-1 2-1 4-1 3 0 4 2 4 4v5s0 1-1 1-1-1-1-1v-5c0-1.094-1-2-2-2-2 0-3 0-4 2v5s0 1-1 1-1-1-1-1z"/></svg>',Ms='<svg height="18" width="18"><rect ry="1" y="8" height="2" width="18" style="font-variation-settings:normal;marker:none"/></svg>',Ts='<svg height="18" width="18"><path d="M1 2v14h16V2H1zm2 2h12v7l-3-3-4 4-2-2-3 3V4z"/><circle r="1.5" cy="6.5" cx="5.5"/></svg>',bs='<svg height="18" width="18"><path d="M9 2a1 1 0 000 2L7 14a1 1 0 100 2h2a1 1 0 000-2l2-10a1 1 0 100-2z"/></svg>',Fs='<svg height="18" width="18"><path d="M9.07 5.18a3.9 3.9 0 00-1.52.43C6.31 6.22 5.3 7.29 4.3 8.29c-1 1-2.07 2.02-2.68 3.26-.31.62-.5 1.33-.41 2.07.09.75.48 1.47 1.1 2.09.61.61 1.33 1 2.08 1.1.74.09 1.45-.1 2.07-.42 1.24-.61 2.26-1.68 3.26-2.68.46-.47.94-.94 1.39-1.44l-.43.26c-.68.34-1.49.56-2.36.46-.2-.03-.4-.08-.6-.14-.79.76-1.55 1.45-2.16 1.76-.38.19-.67.24-.92.21-.26-.03-.54-.14-.92-.53-.39-.38-.5-.66-.53-.91-.03-.26.02-.55.21-.93.39-.76 1.32-1.74 2.32-2.74 1-1 1.98-1.93 2.74-2.32.38-.19.67-.24.93-.21.25.03.53.14.91.53.39.38.5.66.53.92v.06l1.12-1.06.44-.47c-.18-.3-.4-.6-.67-.87-.62-.61-1.34-1-2.09-1.1a3.08 3.08 0 00-.55-.01z"/><path d="M13.07.86a3.9 3.9 0 00-1.52.43c-1.24.62-2.26 1.69-3.26 2.69-.46.47-.94.94-1.39 1.43.15-.08.28-.18.43-.25a4.4 4.4 0 012.36-.46c.2.02.4.07.6.14.79-.77 1.55-1.46 2.16-1.76.38-.19.67-.25.93-.21.25.03.53.14.91.52.39.38.5.66.53.92.03.26-.02.55-.21.93-.39.76-1.32 1.74-2.32 2.74-1 1-1.98 1.93-2.74 2.31-.38.2-.67.25-.93.22-.25-.04-.53-.15-.91-.53-.39-.38-.5-.66-.53-.92V9c-.36.33-.73.67-1.12 1.06l-.43.46c.17.3.4.6.66.87.62.62 1.34 1 2.08 1.1.75.1 1.46-.1 2.08-.41 1.24-.62 2.26-1.69 3.26-2.69s2.07-2.02 2.68-3.26c.31-.62.5-1.32.41-2.07a3.63 3.63 0 00-1.1-2.08c-.61-.62-1.33-1-2.07-1.1a3.08 3.08 0 00-.56-.02z"/></svg>',Ds='<svg height="18" width="18"><path d="M1.5 7a.5.5 0 100 1h1a.5.5 0 01.5.5c0 .164-.08.31-.14.355l-1.655 1.25A.492.492 0 001 10.5a.5.5 0 00.5.5h2a.5.5 0 000-1H3l.398-.299A1.5 1.5 0 002.5 7z"/><path d="M1.5 12c-.667 0-.667 1 0 1h1.25c.333 0 .333.5 0 .5H2.5c-.667 0-.667 1 0 1h.25c.333 0 .333.5 0 .5H1.5c-.667 0-.667 1 0 1h1c.398 0 .78-.131 1.06-.365.282-.235.44-.554.44-.885a1.121 1.121 0 00-.303-.75c.191-.204.3-.47.303-.75 0-.332-.158-.651-.44-.885-.3-.241-.675-.37-1.06-.365z"/><rect y="13" x="6" height="2" width="12" ry="1"/><rect ry="1" width="12" height="2" x="6" y="8"/><rect y="3" x="6" height="2" width="12" ry="1"/><path d="M1.5 2a.5.5 0 100 1H2v2h-.5a.5.5 0 100 1h2a.5.5 0 100-1H3V2.5c0-.277-.223-.5-.5-.5z"/></svg>',ks='<svg width="18" height="18"><path d="M10 2C6 2 4 4 4 6c0 .338.08.672.193 1h2.34C6.113 6.629 6 6.295 6 6c0-.334.117-.725.691-1.154C7.265 4.416 8.331 4 10 4h3a1 1 0 000-2zm1.477 9c.413.368.523.706.523 1 0 .334-.127.712-.701 1.143-.575.43-1.632.85-3.299.857l-1.006.007V14H5a1 1 0 000 2h3c4 0 6-2 6-4 0-.338-.081-.672-.195-1z"/><rect ry="1" y="8" x="1" height="2" width="16"/></svg>',Cs='<svg height="18" width="18"><circle cx="2" cy="9" r="2"/><circle cy="4" cx="2" r="2"/><rect y="3" x="6" height="2" width="12" ry="1"/><circle cx="2" cy="14" r="2"/><rect ry="1" width="12" height="2" x="6" y="8"/><rect y="13" x="6" height="2" width="12" ry="1"/></svg>',Es=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),xs={bold:{name:"bold",action:"bold",innerHTML:gs,title:"Bold",hotkey:"Mod-B"},italic:{name:"italic",action:"italic",innerHTML:bs,title:"Italic",hotkey:"Mod-I"},strikethrough:{name:"strikethrough",action:"strikethrough",innerHTML:ks,title:"Strikethrough",hotkey:"Mod2-Shift-5"},code:{name:"code",action:"code",innerHTML:ms,title:"Format as code"},h1:{name:"h1",action:"h1",innerHTML:vs,title:"Level 1 heading",hotkey:"Mod-Shift-1"},h2:{name:"h2",action:"h2",innerHTML:ys,title:"Level 2 heading",hotkey:"Mod-Shift-2"},ul:{name:"ul",action:"ul",innerHTML:Cs,title:"Bulleted list"},ol:{name:"ol",action:"ol",innerHTML:Ds,title:"Numbered list"},blockquote:{name:"blockquote",action:"blockquote",innerHTML:ds,title:"Quote",hotkey:"Mod2-Shift-Q"},insertLink:{name:"insertLink",action:function(e){e.isInlineFormattingAllowed()&&e.wrapSelection("[","]()")},enabled:function(e,t,n){return!e.isInlineFormattingAllowed(t,n)&&null},innerHTML:Fs,title:"Insert link",hotkey:"Mod-K"},insertImage:{name:"insertImage",action:function(e){e.isInlineFormattingAllowed()&&e.wrapSelection("![","]()")},enabled:function(e,t,n){return!e.isInlineFormattingAllowed(t,n)&&null},innerHTML:Ts,title:"Insert image",hotkey:"Mod2-Shift-I"},hr:{name:"hr",action:function(e){return e.paste("\n***\n")},enabled:function(){return!1},innerHTML:Ms,title:"Insert horizontal line",hotkey:"Mod2-Shift-L"}},ws=function(){function e(t){var n=this;r(this,e),this.e=null,this.editor=null,this.commands=[],this.buttons={},this.state={},this.hotkeys=[];var i=t.element;i&&!i.tagName&&(i=document.getElementById(t.element)),i||(i=document.body),this.createCommandBarElement(i,t.commands||["bold","italic","strikethrough","|","code","|","h1","h2","|","ul","ol","|","blockquote","hr","|","insertLink","insertImage"]),document.addEventListener("keydown",(function(e){return n.handleKeydown(e)})),t.editor&&this.setEditor(t.editor)}return a(e,[{key:"createCommandBarElement",value:function(e,n){var r=this;this.e=document.createElement("div"),this.e.className="TMCommandBar";var i,a=h(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;if("|"==o){var s=document.createElement("div");s.className="TMCommandDivider",this.e.appendChild(s)}else{var u=function(){var e=void 0;if("string"==typeof o){if(!xs[o])return"continue";e=o,r.commands[e]=xs[e]}else{if("object"!=t(o)||!o.name)return"continue";e=o.name,r.commands[e]={},xs[e]&&Object.assign(r.commands[e],xs[e]),Object.assign(r.commands[e],o)}var n=r.commands[e].title||e;if(r.commands[e].hotkey){for(var i=r.commands[e].hotkey.split("-"),a=[],s=[],u=0;u<i.length-1;u++)switch(i[u]){case"Ctrl":a.push("ctrlKey"),s.push("Ctrl");break;case"Cmd":a.push("metaKey"),s.push("â");break;case"Alt":a.push("altKey"),s.push("Alt");break;case"Option":a.push("altKey"),s.push("â¥");break;case"Win":a.push("metaKey"),s.push("â Win");break;case"Shift":a.push("shiftKey"),s.push("â§");break;case"Mod":Es?(a.push("metaKey"),s.push("â")):(a.push("ctrlKey"),s.push("Ctrl"));break;case"Mod2":a.push("altKey"),Es?s.push("â¥"):s.push("Alt")}s.push(i[i.length-1]);var l={modifiers:a,command:e};i[i.length-1].match(/^[0-9]$/)?l.code="Digit".concat(i[i.length-1]):l.key=i[i.length-1].toLowerCase(),r.hotkeys.push(l),n=n.concat(" (".concat(s.join("+"),")"))}r.buttons[e]=document.createElement("div"),r.buttons[e].className="TMCommandButton TMCommandButton_Disabled",r.buttons[e].title=n,r.buttons[e].innerHTML=r.commands[e].innerHTML,r.buttons[e].addEventListener("mousedown",(function(t){return r.handleClick(e,t)})),r.e.appendChild(r.buttons[e])}();if("continue"===u)continue}}}catch(e){a.e(e)}finally{a.f()}e.appendChild(this.e)}},{key:"handleClick",value:function(e,t){this.editor&&(t.preventDefault(),"string"==typeof this.commands[e].action?!1===this.state[e]?this.editor.setCommandState(e,!0):this.editor.setCommandState(e,!1):"function"==typeof this.commands[e].action&&this.commands[e].action(this.editor))}},{key:"setEditor",value:function(e){var t=this;this.editor=e,e.addEventListener("selection",(function(e){return t.handleSelection(e)}))}},{key:"handleSelection",value:function(e){if(e.commandState)for(var t in this.commands)void 0===e.commandState[t]?this.commands[t].enabled?this.state[t]=this.commands[t].enabled(this.editor,e.focus,e.anchor):this.state[t]=!e.focus&&null:this.state[t]=e.commandState[t],!0===this.state[t]?this.buttons[t].className="TMCommandButton TMCommandButton_Active":!1===this.state[t]?this.buttons[t].className="TMCommandButton TMCommandButton_Inactive":this.buttons[t].className="TMCommandButton TMCommandButton_Disabled"}},{key:"handleKeydown",value:function(e){var t,n=h(this.hotkeys);try{e:for(n.s();!(t=n.n()).done;){var r=t.value;if(r.key&&e.key.toLowerCase()==r.key||r.code&&e.code==r.code){var i,a=h(r.modifiers);try{for(a.s();!(i=a.n()).done;){if(!e[i.value])continue e}}catch(e){a.e(e)}finally{a.f()}return void this.handleClick(r.command,e)}}}catch(e){n.e(e)}finally{n.f()}}}]),e}(),As=y,Ss=Function.prototype,$s=Ss.apply,Ls=Ss.call,Os="object"==typeof Reflect&&Reflect.apply||(As?Ls.bind($s):function(){return Ls.apply($s,arguments)}),Is=ae,Bs=N,_s=dt("match"),Ns=function(e){var t;return Is(e)&&(void 0!==(t=e[_s])?!!t:"RegExp"==Bs(e))},Hs=Ro,Ps=we,js=TypeError,Rs=Kt,zs=function(e){if(Hs(e))return e;throw js(Ps(e)+" is not a constructor")},Us=V,qs=dt("species"),Ks=dr,Vs=Mr,Zs=xo,Ws=Array,Ys=Math.max,Gs=Os,Xs=b,Qs=j,Js=Va,eu=Kt,tu=V,nu=Ns,ru=Y,iu=function(e,t){var n,r=Rs(e).constructor;return void 0===r||Us(n=Rs(r)[qs])?t:zs(n)},au=no,ou=vr,su=yi,uu=Ie,lu=function(e,t,n){for(var r=Vs(e),i=Ks(t,r),a=Ks(void 0===n?r:n,r),o=Ws(Ys(a-i,0)),s=0;i<a;i++,s++)Zs(o,s,e[i]);return o.length=s,o},cu=lo,hu=Da,pu=m,fu=Ei.UNSUPPORTED_Y,du=4294967295,gu=Math.min,mu=[].push,vu=Qs(/./.exec),yu=Qs(mu),Mu=Qs("".slice),Tu=!pu((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Js("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=su(ru(this)),i=void 0===n?du:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!nu(e))return Xs(t,r,e,i);for(var a,o,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,h=new RegExp(e.source,l+"g");(a=Xs(hu,h,r))&&!((o=h.lastIndex)>c&&(yu(u,Mu(r,c,a.index)),a.length>1&&a.index<r.length&&Gs(mu,u,lu(a,1)),s=a[0].length,c=o,u.length>=i));)h.lastIndex===a.index&&h.lastIndex++;return c===r.length?!s&&vu(h,"")||yu(u,""):yu(u,Mu(r,c)),u.length>i?lu(u,0,i):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:Xs(t,this,e,n)}:t,[function(t,n){var i=ru(this),a=tu(t)?void 0:uu(t,e);return a?Xs(a,t,i,n):Xs(r,su(i),t,n)},function(e,i){var a=eu(this),o=su(e),s=n(r,a,o,i,r!==t);if(s.done)return s.value;var u=iu(a,RegExp),l=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(fu?"g":"y"),h=new u(fu?"^(?:"+a.source+")":a,c),p=void 0===i?du:i>>>0;if(0===p)return[];if(0===o.length)return null===cu(h,o)?[o]:[];for(var f=0,d=0,g=[];d<o.length;){h.lastIndex=fu?0:d;var m,v=cu(h,fu?Mu(o,d):o);if(null===v||(m=gu(ou(h.lastIndex+(fu?d:0)),o.length))===f)d=au(o,d,l);else{if(yu(g,Mu(o,f,d)),g.length===p)return g;for(var y=1;y<=v.length-1;y++)if(yu(g,v[y]),g.length===p)return g;d=f=m}}return yu(g,Mu(o,f)),g}]}),!Tu,fu);var bu=j,Fu=Ye,Du=Math.floor,ku=bu("".charAt),Cu=bu("".replace),Eu=bu("".slice),xu=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wu=/\$([$&'`]|\d{1,2})/g,Au=Os,Su=b,$u=j,Lu=Va,Ou=m,Iu=Kt,Bu=ne,_u=V,Nu=cr,Hu=vr,Pu=yi,ju=Y,Ru=no,zu=Ie,Uu=function(e,t,n,r,i,a){var o=n+e.length,s=r.length,u=wu;return void 0!==i&&(i=Fu(i),u=xu),Cu(a,u,(function(a,u){var l;switch(ku(u,0)){case"$":return"$";case"&":return e;case"`":return Eu(t,0,n);case"'":return Eu(t,o);case"<":l=i[Eu(u,1,-1)];break;default:var c=+u;if(0===c)return a;if(c>s){var h=Du(c/10);return 0===h?a:h<=s?void 0===r[h-1]?ku(u,1):r[h-1]+ku(u,1):a}l=r[c-1]}return void 0===l?"":l}))},qu=lo,Ku=dt("replace"),Vu=Math.max,Zu=Math.min,Wu=$u([].concat),Yu=$u([].push),Gu=$u("".indexOf),Xu=$u("".slice),Qu="$0"==="a".replace(/./,"$0"),Ju=!!/./[Ku]&&""===/./[Ku]("a","$0"),el=!Ou((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Lu("replace",(function(e,t,n){var r=Ju?"$":"$0";return[function(e,n){var r=ju(this),i=_u(e)?void 0:zu(e,Ku);return i?Su(i,e,r,n):Su(t,Pu(r),e,n)},function(e,i){var a=Iu(this),o=Pu(e);if("string"==typeof i&&-1===Gu(i,r)&&-1===Gu(i,"$<")){var s=n(t,a,o,i);if(s.done)return s.value}var u=Bu(i);u||(i=Pu(i));var l=a.global;if(l){var c=a.unicode;a.lastIndex=0}for(var h=[];;){var p=qu(a,o);if(null===p)break;if(Yu(h,p),!l)break;""===Pu(p[0])&&(a.lastIndex=Ru(o,Hu(a.lastIndex),c))}for(var f,d="",g=0,m=0;m<h.length;m++){for(var v=Pu((p=h[m])[0]),y=Vu(Zu(Nu(p.index),o.length),0),M=[],T=1;T<p.length;T++)Yu(M,void 0===(f=p[T])?f:String(f));var b=p.groups;if(u){var F=Wu([v],M,y,o);void 0!==b&&Yu(F,b);var D=Pu(Au(i,void 0,F))}else D=Uu(v,o,y,M,b,i);y>=g&&(d+=Xu(o,g,y)+D,g=y+v.length)}return d+Xu(o,g)}]}),!el||!Qu||Ju);var tl="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",nl=Y,rl=yi,il=j("".replace),al="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",ol=RegExp("^"+al+al+"*"),sl=RegExp(al+al+"*$"),ul=function(e){return function(t){var n=rl(nl(t));return 1&e&&(n=il(n,ol,"")),2&e&&(n=il(n,sl,"")),n}},ll={start:ul(1),end:ul(2),trim:ul(3)},cl=fn.PROPER,hl=m,pl=tl,fl=ll.trim;si({target:"String",proto:!0,forced:function(e){return hl((function(){return!!pl[e]()||"âÂá "!=="âÂá "[e]()||cl&&pl[e].name!==e}))}("trim")},{trim:function(){return fl(this)}});var dl=d,gl=m,ml=j,vl=yi,yl=ll.trim,Ml=tl,Tl=dl.parseInt,bl=dl.Symbol,Fl=bl&&bl.iterator,Dl=/^[+-]?0x/i,kl=ml(Dl.exec),Cl=8!==Tl(Ml+"08")||22!==Tl(Ml+"0x16")||Fl&&!gl((function(){Tl(Object(Fl))}))?function(e,t){var n=yl(vl(e));return Tl(n,t>>>0||(kl(Dl,n)?16:10))}:Tl;si({global:!0,forced:parseInt!=Cl},{parseInt:Cl});var El=v,xl=bo,wl=TypeError,Al=Object.getOwnPropertyDescriptor,Sl=El&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),$l=we,Ll=TypeError,Ol=si,Il=Ye,Bl=dr,_l=cr,Nl=Mr,Hl=Sl?function(e,t){if(xl(e)&&!Al(e,"length").writable)throw wl("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},Pl=Do,jl=Wo,Rl=xo,zl=function(e,t){if(!delete e[t])throw Ll("Cannot delete property "+$l(t)+" of "+$l(e))},Ul=Qo("splice"),ql=Math.max,Kl=Math.min;Ol({target:"Array",proto:!0,forced:!Ul},{splice:function(e,t){var n,r,i,a,o,s,u=Il(this),l=Nl(u),c=Bl(e,l),h=arguments.length;for(0===h?n=r=0:1===h?(n=0,r=l-c):(n=h-2,r=Kl(ql(_l(t),0),l-c)),Pl(l+n-r),i=jl(u,r),a=0;a<r;a++)(o=c+a)in u&&Rl(i,a,u[o]);if(i.length=r,n<r){for(a=c;a<l-r;a++)s=a+n,(o=a+r)in u?u[s]=u[o]:zl(u,s);for(a=l;a>l-r+n;a--)zl(u,a-1)}else if(n>r)for(a=l-r;a>c;a--)s=a+n-1,(o=a+r-1)in u?u[s]=u[o]:zl(u,s);for(a=0;a<n;a++)u[a+c]=arguments[a+2];return Hl(u,l-r+n),i}});var Vl=dt,Zl=Gi,Wl=jt.f,Yl=Vl("unscopables"),Gl=Array.prototype;null==Gl[Yl]&&Wl(Gl,Yl,{configurable:!0,value:Zl(null)});var Xl=kr.includes,Ql=function(e){Gl[Yl][e]=!0};si({target:"Array",proto:!0,forced:m((function(){return!Array(1).includes()}))},{includes:function(e){return Xl(this,e,arguments.length>1?arguments[1]:void 0)}}),Ql("includes");var Jl=Ns,ec=TypeError,tc=dt("match"),nc=si,rc=function(e){if(Jl(e))throw ec("The method doesn't accept regular expressions");return e},ic=Y,ac=yi,oc=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[tc]=!1,"/./"[e](t)}catch(e){}}return!1},sc=j("".indexOf);nc({target:"String",proto:!0,forced:!oc("includes")},{includes:function(e){return!!~sc(ac(ic(this)),ac(rc(e)),arguments.length>1?arguments[1]:void 0)}});var uc=ne,lc=String,cc=TypeError,hc=j,pc=Kt,fc=function(e){if("object"==typeof e||uc(e))return e;throw cc("Can't set "+lc(e)+" as a prototype")},dc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=hc(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return pc(n),fc(r),t?e(n,r):n.__proto__=r,n}}():void 0),gc=ne,mc=ae,vc=dc,yc=b,Mc=Qe,Tc=ce,bc=Ti,Fc=RegExp.prototype,Dc=function(e){var t=e.flags;return void 0!==t||"flags"in Fc||Mc(e,"flags")||!Tc(Fc,e)?t:yc(bc,e)},kc=jt.f,Cc=le,Ec=jt,xc=v,wc=dt("species"),Ac=v,Sc=d,$c=j,Lc=Jr,Oc=function(e,t,n){var r,i;return vc&&gc(r=t.constructor)&&r!==n&&mc(i=r.prototype)&&i!==n.prototype&&vc(e,i),e},Ic=on,Bc=or.f,_c=ce,Nc=Ns,Hc=yi,Pc=Dc,jc=Ei,Rc=function(e,t,n){n in e||kc(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},zc=ar,Uc=m,qc=Qe,Kc=zn.enforce,Vc=function(e){var t=Cc(e),n=Ec.f;xc&&t&&!t[wc]&&n(t,wc,{configurable:!0,get:function(){return this}})},Zc=Ji,Wc=na,Yc=dt("match"),Gc=Sc.RegExp,Xc=Gc.prototype,Qc=Sc.SyntaxError,Jc=$c(Xc.exec),eh=$c("".charAt),th=$c("".replace),nh=$c("".indexOf),rh=$c("".slice),ih=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ah=/a/g,oh=/a/g,sh=new Gc(ah)!==ah,uh=jc.MISSED_STICKY,lh=jc.UNSUPPORTED_Y,ch=Ac&&(!sh||uh||Zc||Wc||Uc((function(){return oh[Yc]=!1,Gc(ah)!=ah||Gc(oh)==oh||"/a/i"!=Gc(ah,"i")})));if(Lc("RegExp",ch)){for(var hh=function(e,t){var n,r,i,a,o,s,u=_c(Xc,this),l=Nc(e),c=void 0===t,h=[],p=e;if(!u&&l&&c&&e.constructor===hh)return e;if((l||_c(Xc,e))&&(e=e.source,c&&(t=Pc(p))),e=void 0===e?"":Hc(e),t=void 0===t?"":Hc(t),p=e,Zc&&"dotAll"in ah&&(r=!!t&&nh(t,"s")>-1)&&(t=th(t,/s/g,"")),n=t,uh&&"sticky"in ah&&(i=!!t&&nh(t,"y")>-1)&&lh&&(t=th(t,/y/g,"")),Wc&&(a=function(e){for(var t,n=e.length,r=0,i="",a=[],o={},s=!1,u=!1,l=0,c="";r<=n;r++){if("\\"===(t=eh(e,r)))t+=eh(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:Jc(ih,rh(e,r+1))&&(r+=2,u=!0),i+=t,l++;continue;case">"===t&&u:if(""===c||qc(o,c))throw new Qc("Invalid capture group name");o[c]=!0,a[a.length]=[c,l],u=!1,c="";continue}u?c+=t:i+=t}return[i,a]}(e),e=a[0],h=a[1]),o=Oc(Gc(e,t),u?this:Xc,hh),(r||i||h.length)&&(s=Kc(o),r&&(s.dotAll=!0,s.raw=hh(function(e){for(var t,n=e.length,r=0,i="",a=!1;r<=n;r++)"\\"!==(t=eh(e,r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),i+=t):i+="[\\s\\S]":i+=t+eh(e,++r);return i}(e),n)),i&&(s.sticky=!0),h.length&&(s.groups=h)),e!==p)try{Ic(o,"source",""===p?"(?:)":p)}catch(e){}return o},ph=Bc(Gc),fh=0;ph.length>fh;)Rc(hh,Gc,ph[fh++]);Xc.constructor=hh,hh.prototype=Xc,zc(Sc,"RegExp",hh,{constructor:!0})}Vc("RegExp");var dh=fn.PROPER,gh=ar,mh=Kt,vh=yi,yh=m,Mh=Dc,Th="toString",bh=RegExp.prototype.toString,Fh=yh((function(){return"/a/b"!=bh.call({source:"a",flags:"b"})})),Dh=dh&&bh.name!=Th;(Fh||Dh)&&gh(RegExp.prototype,Th,(function(){var e=mh(this);return"/"+vh(e.source)+"/"+vh(Mh(e))}),{unsafe:!0});var kh=Ye,Ch=Si;si({target:"Object",stat:!0,forced:m((function(){Ch(1)}))},{keys:function(e){return Ch(kh(e))}});var Eh=sn.exports,xh=jt,wh=v,Ah=function(e,t,n){return n.get&&Eh(n.get,t,{getter:!0}),n.set&&Eh(n.set,t,{setter:!0}),xh.f(e,t,n)},Sh=Ti,$h=m,Lh=d.RegExp,Oh=Lh.prototype;wh&&$h((function(){var e=!0;try{Lh(".","d")}catch(t){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(a.hasIndices="d"),a)i(o,a[o]);return Object.getOwnPropertyDescriptor(Oh,"flags").get.call(t)!==r||n!==r}))&&Ah(Oh,"flags",{configurable:!0,get:Sh});var Ih,Bh={ASCIIPunctuation:/[!"#$%&'()*+,\-./:;<=>?@[\]^_`{|}~\\]/,NotTriggerChar:/[^`_*[\]()<>!~]/,Scheme:/[A-Za-z][A-Za-z0-9+.-]{1,31}/,Email:/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/,HTMLOpenTag:/<HTMLTagName(?:HTMLAttribute)*\s*\/?>/,HTMLCloseTag:/<\/HTMLTagName\s*>/,HTMLTagName:/[A-Za-z][A-Za-z0-9-]*/,HTMLComment:/<!--(?:[^>-]|(?:[^>-](?:[^-]|-[^-])*[^-]))-->/,HTMLPI:/<\?(?:|.|(?:[^?]|\?[^>])*)\?>/,HTMLDeclaration:/<![A-Z]+\s[^>]*>/,HTMLCDATA:/<!\[CDATA\[.*?\]\]>/,HTMLAttribute:/\s+[A-Za-z_:][A-Za-z0-9_.:-]*(?:HTMLAttValue)?/,HTMLAttValue:/\s*=\s*(?:(?:'[^']*')|(?:"[^"]*")|(?:[^\s"'=<>`]+))/,KnownTag:/address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul/},_h=new RegExp(/^(?:[!"#$%&'()*+,\-./:;<=>?@[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B])/),Nh=new RegExp(/(?:[!"#$%&'()*+,\-./:;<=>?@[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B])$/),Hh={TMH1:{regexp:/^( {0,3}#\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH1">$1</span>$$2<span class="TMMark TMMark_TMH1">$3</span>'},TMH2:{regexp:/^( {0,3}##\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH2">$1</span>$$2<span class="TMMark TMMark_TMH2">$3</span>'},TMH3:{regexp:/^( {0,3}###\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH3">$1</span>$$2<span class="TMMark TMMark_TMH3">$3</span>'},TMH4:{regexp:/^( {0,3}####\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH4">$1</span>$$2<span class="TMMark TMMark_TMH4">$3</span>'},TMH5:{regexp:/^( {0,3}#####\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH5">$1</span>$$2<span class="TMMark TMMark_TMH5">$3</span>'},TMH6:{regexp:/^( {0,3}######\s)(.*?)((?:\s+#+\s*)?)$/,replacement:'<span class="TMMark TMMark_TMH6">$1</span>$$2<span class="TMMark TMMark_TMH6">$3</span>'},TMBlockquote:{regexp:/^( {0,3}>[ ]?)(.*)$/,replacement:'<span class="TMMark TMMark_TMBlockquote">$1</span>$$2'},TMCodeFenceBacktickOpen:{regexp:n(/^( {0,3}(````*)\s*)([^`]*?)(\s*)$/,{seq:2}),replacement:'<span class="TMMark TMMark_TMCodeFenceBacktick">$1</span><span class="TMInfoString">$3</span>$4'},TMCodeFenceTildeOpen:{regexp:n(/^( {0,3}(~~~~*)\s*)(.*?)(\s*)$/,{seq:2}),replacement:'<span class="TMMark TMMark_TMCodeFenceTilde">$1</span><span class="TMInfoString">$3</span>$4'},TMCodeFenceBacktickClose:{regexp:n(/^( {0,3}(````*))(\s*)$/,{seq:2}),replacement:'<span class="TMMark TMMark_TMCodeFenceBacktick">$1</span>$3'},TMCodeFenceTildeClose:{regexp:n(/^( {0,3}(~~~~*))(\s*)$/,{seq:2}),replacement:'<span class="TMMark TMMark_TMCodeFenceTilde">$1</span>$3'},TMBlankLine:{regexp:/^([ \t]*)$/,replacement:"$0"},TMSetextH1Marker:{regexp:/^ {0,3}=+\s*$/,replacement:'<span class="TMMark TMMark_TMSetextH1Marker">$0</span>'},TMSetextH2Marker:{regexp:/^ {0,3}-+\s*$/,replacement:'<span class="TMMark TMMark_TMSetextH1Marker">$0</span>'},TMHR:{regexp:/^( {0,3}(\*[ \t]*\*[ \t]*\*[ \t*]*)|(-[ \t]*-[ \t]*-[ \t-]*)|(_[ \t]*_[ \t]*_[ \t_]*))$/,replacement:'<span class="TMMark TMMark_TMHR">$0</span>'},TMUL:{regexp:/^( {0,3}[+*-] {1,4})(.*)$/,replacement:'<span class="TMMark TMMark_TMUL">$1</span>$$2'},TMOL:{regexp:/^( {0,3}\d{1,9}[.)] {1,4})(.*)$/,replacement:'<span class="TMMark TMMark_TMOL">$1</span>$$2'},TMIndentedCode:{regexp:/^( {4}|\t)(.*)$/,replacement:'<span class="TMMark TMMark_TMIndentedCode">$1</span>$2'},TMLinkReferenceDefinition:{regexp:/^( {0,3}\[\s*)([^\s\]](?:[^\]]|\\\])*?)(\s*\]:\s*)((?:[^\s<>]+)|(?:<(?:[^<>\\]|\\.)*>))?(\s*)((?:\((?:[^()\\]|\\.)*\))|(?:"(?:[^"\\]|\\.)*")|(?:'(?:[^'\\]|\\.)*'))?(\s*)$/,replacement:'<span class="TMMark TMMark_TMLinkReferenceDefinition">$1</span><span class="TMLinkLabel TMLinkLabel_Definition">$2</span><span class="TMMark TMMark_TMLinkReferenceDefinition">$3</span><span class="TMLinkDestination">$4</span>$5<span class="TMLinkTitle">$6</span>$7',labelPlaceholder:2}},Ph=[{start:/^ {0,3}<(?:script|pre|style)(?:\s|>|$)/i,end:/(?:<\/script>|<\/pre>|<\/style>)/i,paraInterrupt:!0},{start:/^ {0,3}<!--/,end:/-->/,paraInterrupt:!0},{start:/^ {0,3}<\?/,end:/\?>/,paraInterrupt:!0},{start:/^ {0,3}<![A-Z]/,end:/>/,paraInterrupt:!0},{start:/^ {0,3}<!\[CDATA\[/,end:/\]\]>/,paraInterrupt:!0},{start:/^ {0,3}(?:<|<\/)(?:KnownTag)(?:\s|>|\/>|$)/i,end:!1,paraInterrupt:!0},{start:/^ {0,3}(?:HTMLOpenTag|HTMLCloseTag)\s*$/,end:!1,paraInterrupt:!1}],jh={escape:{regexp:/^\\(ASCIIPunctuation)/,replacement:'<span class="TMMark TMMark_TMEscape">\\</span>$1'},code:{regexp:/^(`+)((?:[^`])|(?:[^`].*?[^`]))(\1)/,replacement:'<span class="TMMark TMMark_TMCode">$1</span><code class="TMCode">$2</code><span class="TMMark TMMark_TMCode">$3</span>'},autolink:{regexp:/^<((?:Scheme:[^\s<>]*)|(?:Email))>/,replacement:'<span class="TMMark TMMark_TMAutolink">&lt;</span><span class="TMAutolink">$1</span><span class="TMMark TMMark_TMAutolink">&gt;</span>'},html:{regexp:/^((?:HTMLOpenTag)|(?:HTMLCloseTag)|(?:HTMLComment)|(?:HTMLPI)|(?:HTMLDeclaration)|(?:HTMLCDATA))/,replacement:'<span class="TMHTML">$1</span>'},linkOpen:{regexp:/^\[/,replacement:""},imageOpen:{regexp:/^!\[/,replacement:""},linkLabel:{regexp:/^(\[\s*)([^\]]*?)(\s*\])/,replacement:"",labelPlaceholder:2},default:{regexp:/^(.|(?:NotTriggerChar+))/,replacement:"$1"}},Rh=new RegExp(Object.keys(Bh).join("|")),zh=h(u(Object.keys(jh)));try{for(zh.s();!(Ih=zh.n()).done;){for(var Uh=Ih.value,qh=jh[Uh].regexp.source;qh.match(Rh);)qh=qh.replace(Rh,(function(e){return Bh[e].source}));jh[Uh].regexp=new RegExp(qh,jh[Uh].regexp.flags)}}catch(e){zh.e(e)}finally{zh.f()}for(var Kh=0,Vh=Ph;Kh<Vh.length;Kh++){for(var Zh=Vh[Kh],Wh=Zh.start.source;Wh.match(Rh);)Wh=Wh.replace(Rh,(function(e){return Bh[e].source}));Zh.start=new RegExp(Wh,Zh.start.flags)}function Yh(e){return(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Gh={bold:{type:"inline",className:"TMStrong",set:{pre:"**",post:"**"},unset:{prePattern:/(?:\*\*|__)$/,postPattern:/^(?:\*\*|__)/}},italic:{type:"inline",className:"TMEm",set:{pre:"*",post:"*"},unset:{prePattern:/(?:\*|_)$/,postPattern:/^(?:\*|_)/}},code:{type:"inline",className:"TMCode",set:{pre:"`",post:"`"},unset:{prePattern:/`+$/,postPattern:/^`+/}},strikethrough:{type:"inline",className:"TMStrikethrough",set:{pre:"~~",post:"~~"},unset:{prePattern:/~~$/,postPattern:/^~~/}},h1:{type:"line",className:"TMH1",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"# $2"},unset:{pattern:/^( {0,3}#\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},h2:{type:"line",className:"TMH2",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"## $2"},unset:{pattern:/^( {0,3}##\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},h3:{type:"line",className:"TMH3",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"### $2"},unset:{pattern:/^( {0,3}###\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},h4:{type:"line",className:"TMH4",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"#### $2"},unset:{pattern:/^( {0,3}####\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},h5:{type:"line",className:"TMH5",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"##### $2"},unset:{pattern:/^( {0,3}#####\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},h6:{type:"line",className:"TMH6",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"###### $2"},unset:{pattern:/^( {0,3}######\s+)(.*?)((?:\s+#+\s*)?)$/,replacement:"$2"}},ul:{type:"line",className:"TMUL",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"- $2"},unset:{pattern:/^( {0,3}[+*-] {1,4})(.*)$/,replacement:"$2"}},ol:{type:"line",className:"TMOL",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"$#. $2"},unset:{pattern:/^( {0,3}\d{1,9}[.)] {1,4})(.*)$/,replacement:"$2"}},blockquote:{type:"line",className:"TMBlockquote",set:{pattern:/^( {0,3}(?:(?:#+|[0-9]{1,9}[).]|[>\-*+])\s+)?)(.*)$/,replacement:"> $2"},unset:{pattern:/^( {0,3}>[ ]?)(.*)$/,replacement:"$2"}}},Xh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.e=null,this.textarea=null,this.lines=[],this.lineElements=[],this.lineTypes=[],this.lineCaptures=[],this.lineReplacements=[],this.linkLabels=[],this.lineDirty=[],this.lastCommandState=null,this.listeners={change:[],selection:[]};var n=t.element;this.textarea=t.textarea,this.textarea&&!this.textarea.tagName&&(this.textarea=document.getElementById(this.textarea),n||(n=this.textarea)),n&&!n.tagName&&(n=document.getElementById(t.element)),n||(n=document.getElementsByTagName("body")[0]),"TEXTAREA"==n.tagName&&(this.textarea=n,n=this.textarea.parentNode),this.textarea&&(this.textarea.style.display="none"),this.createEditorElement(n),this.setContent(t.content||!!this.textarea&&this.textarea.value||"# Hello TinyMDE!\nEdit **here**")}return a(e,[{key:"createEditorElement",value:function(e){var t=this;this.e=document.createElement("div"),this.e.className="TinyMDE",this.e.contentEditable=!0,this.e.style.whiteSpace="pre-wrap",this.e.style.webkitUserModify="read-write-plaintext-only",this.textarea&&this.textarea.parentNode==e&&this.textarea.nextSibling?e.insertBefore(this.e,this.textarea.nextSibling):e.appendChild(this.e),this.e.addEventListener("input",(function(e){return t.handleInputEvent(e)})),document.addEventListener("selectionchange",(function(e){return t.handleSelectionChangeEvent(e)})),this.e.addEventListener("paste",(function(e){return t.handlePaste(e)})),this.lineElements=this.e.childNodes}},{key:"setContent",value:function(e){for(;this.e.firstChild;)this.e.removeChild(this.e.firstChild);this.lines=e.split(/(?:\r\n|\r|\n)/),this.lineDirty=[];for(var t=0;t<this.lines.length;t++){var n=document.createElement("div");this.e.appendChild(n),this.lineDirty.push(!0)}this.lineTypes=new Array(this.lines.length),this.updateFormatting(),this.fireChange()}},{key:"getContent",value:function(){return this.lines.join("\n")}},{key:"updateFormatting",value:function(){this.updateLineTypes(),this.updateLinkLabels(),this.applyLineTypes()}},{key:"updateLinkLabels",value:function(){this.linkLabels=[];for(var e=0;e<this.lines.length;e++)"TMLinkReferenceDefinition"==this.lineTypes[e]&&this.linkLabels.push(this.lineCaptures[e][Hh.TMLinkReferenceDefinition.labelPlaceholder])}},{key:"replace",value:function(e,t){var n=this;return e.replace(/\$\$([0-9])/g,(function(e,r){return'<span class="TMInlineFormatted">'.concat(n.processInlineStyles(t[r]),"</span>")})).replace(/\$([0-9])/g,(function(e,n){return Yh(t[n])}))}},{key:"applyLineTypes",value:function(){for(var e=0;e<this.lines.length;e++){if(this.lineDirty[e]){var t=this.replace(this.lineReplacements[e],this.lineCaptures[e]);this.lineElements[e].className=this.lineTypes[e],this.lineElements[e].removeAttribute("style"),this.lineElements[e].innerHTML=""==t?"<br />":t}this.lineElements[e].dataset.lineNum=e}}},{key:"updateLineTypes",value:function(){for(var e=!1,t=0,n=!1,r=0;r<this.lines.length;r++){var i="TMPara",a=[this.lines[r]],o="$$0";if("TMCodeFenceBacktickOpen"==e){var s=Hh.TMCodeFenceBacktickClose.regexp.exec(this.lines[r]);s&&s.groups.seq.length>=t?(i="TMCodeFenceBacktickClose",o=Hh.TMCodeFenceBacktickClose.replacement,a=s,e=!1):(i="TMFencedCodeBacktick",o="$0",a=[this.lines[r]])}else if("TMCodeFenceTildeOpen"==e){var u=Hh.TMCodeFenceTildeClose.regexp.exec(this.lines[r]);u&&u.groups.seq.length>=t?(i="TMCodeFenceTildeClose",o=Hh.TMCodeFenceTildeClose.replacement,a=u,e=!1):(i="TMFencedCodeTilde",o="$0",a=[this.lines[r]])}if("TMPara"==i&&!1===n){var l,c=h(Ph);try{for(c.s();!(l=c.n()).done;){var p=l.value;if(this.lines[r].match(p.start)&&(p.paraInterrupt||0==r||"TMPara"!=this.lineTypes[r-1]&&"TMUL"!=this.lineTypes[r-1]&&"TMOL"!=this.lineTypes[r-1]&&"TMBlockquote"!=this.lineTypes[r-1])){n=p;break}}}catch(e){c.e(e)}finally{c.f()}}if(!1!==n&&(i="TMHTMLBlock",o="$0",a=[this.lines[r]],n.end?this.lines[r].match(n.end)&&(n=!1):(r==this.lines.length-1||this.lines[r+1].match(Hh.TMBlankLine.regexp))&&(n=!1)),"TMPara"==i)for(var f in Hh)if(Hh[f].regexp){var d=Hh[f].regexp.exec(this.lines[r]);if(d){i=f,o=Hh[f].replacement,a=d;break}}if("TMCodeFenceBacktickOpen"!=i&&"TMCodeFenceTildeOpen"!=i||(e=i,t=a.groups.seq.length),"TMIndentedCode"!=i&&"TMLinkReferenceDefinition"!=i||!(r>0)||"TMPara"!=this.lineTypes[r-1]&&"TMUL"!=this.lineTypes[r-1]&&"TMOL"!=this.lineTypes[r-1]&&"TMBlockquote"!=this.lineTypes[r-1]||(i="TMPara",a=[this.lines[r]],o="$$0"),"TMSetextH2Marker"==i){var g=Hh.TMUL.regexp.exec(this.lines[r]);g&&(i="TMUL",o=Hh.TMUL.replacement,a=g)}if("TMSetextH1Marker"==i||"TMSetextH2Marker"==i)if(0==r||"TMPara"!=this.lineTypes[r-1]){var m=Hh.TMHR.regexp.exec(this.lines[r]);m?(i="TMHR",a=m,o=Hh.TMHR.replacement):(i="TMPara",a=[this.lines[r]],o="$$0")}else{var v=r-1,y="TMSetextH1Marker"==i?"TMSetextH1":"TMSetextH2";do{this.lineTypes[y]!=y&&(this.lineTypes[v]=y,this.lineDirty[y]=!0),this.lineReplacements[v]="$$0",this.lineCaptures[v]=[this.lines[v]],v--}while(v>=0&&"TMPara"==this.lineTypes[v])}this.lineTypes[r]!=i&&(this.lineTypes[r]=i,this.lineDirty[r]=!0),this.lineReplacements[r]=o,this.lineCaptures[r]=a}}},{key:"updateLineContentsAndFormatting",value:function(){this.clearDirtyFlag(),this.updateLineContents(),this.updateFormatting()}},{key:"parseLinkOrImage",value:function(e,t){var n=t?2:1,r=e.substr(0,n),i=t?"TMImage":"TMLink",a=n,o=1,s=!1,u=!1,l=[],c=[];e:for(;a<e.length&&!1===s;){for(var p=e.substr(a),f=0,d=["escape","code","autolink","html"];f<d.length;f++){var g=jh[d[f]].regexp.exec(p);if(g){a+=g[0].length;continue e}}if(p.match(jh.imageOpen.regexp))o++,a+=2;else if(p.match(jh.linkOpen.regexp)){if(o++,!t&&this.parseLinkOrImage(p,!1))return!1;a+=1}else p.match(/^\]/)&&0==--o?(s=e.substr(n,a-n),a++):a++}if(!1===s)return!1;var m=a<e.length?e.substr(a,1):"";if("["==m){var v=e.substr(a),y=jh.linkLabel.regexp.exec(v);if(!y)return!1;a+=y[0].length,l.push(y[1],y[2],y[3]),u=y[jh.linkLabel.labelPlaceholder]?y[jh.linkLabel.labelPlaceholder]:s.trim()}else if("("!=m)u=s.trim();else{a++;for(var M=1;a<e.length&&M>0;){var T=e.substr(a),b=/^\s+/.exec(T);if(b){switch(c.length){case 0:case 1:c.push(b[0]);break;case 2:if(c[0].match(/</))c[1]=c[1].concat(b[0]);else{if(1!=M)return!1;c.push(""),c.push(b[0])}break;case 3:c.push(b[0]);break;case 4:return!1;case 5:c.push("");case 6:c[5]=c[5].concat(b[0]);break;case 7:c[6]=c[6].concat(b[0]);break;default:return!1}a+=b[0].length}else if(b=jh.escape.regexp.exec(T)){switch(c.length){case 0:c.push("");case 1:c.push(b[0]);break;case 2:c[1]=c[1].concat(b[0]);break;case 3:case 4:return!1;case 5:c.push("");case 6:c[5]=c[5].concat(b[0]);break;default:return!1}a+=b[0].length}else if(c.length<2&&T.match(/^</))0==c.length&&c.push(""),c[0]=c[0].concat("<"),a++;else if(1!=c.length&&2!=c.length||!T.match(/^>/))if(!(b=/^["']/.exec(T))||0!=c.length&&1!=c.length&&4!=c.length)if(!b||5!=c.length&&6!=c.length||c[4]!=b[0])if(T.match(/^\(/)){switch(c.length){case 0:c.push("");case 1:c.push("");case 2:c[1]=c[1].concat("("),c[0].match(/<$/)||M++;break;case 3:c.push("");case 4:c.push("(");break;case 5:c.push("");case 6:if("("==c[4])return!1;c[5]=c[5].concat("(");break;default:return!1}a++}else if(T.match(/^\)/)){if(c.length<=2){for(;c.length<2;)c.push("");c[0].match(/<$/)||M--,M>0&&(c[1]=c[1].concat(")"))}else 5==c.length||6==c.length?"("==c[4]?(5==c.length&&c.push(""),c.push(")")):5==c.length?c.push(")"):c[5]=c[5].concat(")"):M--;if(0==M)for(;c.length<7;)c.push("");a++}else{if(!(b=/^./.exec(T)))throw"Infinite loop";switch(c.length){case 0:c.push("");case 1:c.push(b[0]);break;case 2:c[1]=c[1].concat(b[0]);break;case 3:case 4:return!1;case 5:c.push("");case 6:c[5]=c[5].concat(b[0]);break;default:return!1}a+=b[0].length}else 5==c.length&&c.push(""),c.push(b[0]),a++;else{for(;c.length<4;)c.push("");c.push(b[0]),a++}else 1==c.length&&c.push(""),c.push(">"),a++}if(M>0)return!1}if(!1!==u){var F,D=!1,k=h(this.linkLabels);try{for(k.s();!(F=k.n()).done;){if(F.value==u){D=!0;break}}}catch(e){k.e(e)}finally{k.f()}var C=D?"TMLinkLabel TMLinkLabel_Valid":"TMLinkLabel TMLinkLabel_Invalid",E='<span class="TMMark TMMark_'.concat(i,'">').concat(r,'</span><span class="').concat(i," ").concat(l.length<3||!l[1]?C:"",'">').concat(this.processInlineStyles(s),'</span><span class="TMMark TMMark_').concat(i,'">]</span>');return l.length>=3&&(E=E.concat('<span class="TMMark TMMark_'.concat(i,'">').concat(l[0],"</span>"),'<span class="'.concat(C,'">').concat(l[1],"</span>"),'<span class="TMMark TMMark_'.concat(i,'">').concat(l[2],"</span>"))),{output:E,charCount:a}}if(c){for(;c.length<7;)c.push("");return{output:'<span class="TMMark TMMark_'.concat(i,'">').concat(r,'</span><span class="').concat(i,'">').concat(this.processInlineStyles(s),'</span><span class="TMMark TMMark_').concat(i,'">](').concat(c[0],'</span><span class="').concat(i,'Destination">').concat(c[1],'</span><span class="TMMark TMMark_').concat(i,'">').concat(c[2]).concat(c[3]).concat(c[4],'</span><span class="').concat(i,'Title">').concat(c[5],'</span><span class="TMMark TMMark_').concat(i,'">').concat(c[6],")</span>"),charCount:a}}return!1}},{key:"processInlineStyles",value:function(e){for(var n=this,r="",i=[],a=0,o=e,s=function(){for(var s=function(){var e=l[u],t=jh[e].regexp.exec(o);if(t)return o=o.substr(t[0].length),a+=t[0].length,r+=jh[e].replacement.replace(/\$([1-9])/g,(function(e,n){return Yh(t[n])})),{v:"continue|outer"}},u=0,l=["escape","code","autolink","html"];u<l.length;u++){var c=s();if("object"===t(c))return c.v}var h=o.match(jh.linkOpen.regexp),p=o.match(jh.imageOpen.regexp);if(p||h){var f=n.parseLinkOrImage(o,p);if(f)return r="".concat(r).concat(f.output),o=o.substr(f.charCount),a+=f.charCount,"continue|outer"}var d=/(^\*+)|(^_+)/.exec(o);if(d){var g=d[0].length,m=d[0],v=d[0][0];o=o.substr(d[0].length);var y=a>0?e.substr(0,a):" ",M=a+d[0].length<e.length?o:" ",T=M.match(_h),b=y.match(Nh),F=M.match(/^\s/),D=y.match(/\s$/),k=!(F||T&&!D&&!b),C=!(D||b&&!F&&!T);if("_"==v&&k&&C&&(k=b,C=T),C)for(var E=i.length-1;g&&E>=0;)if(i[E].delimiter==v){for(;E<i.length-1;){var x=i.pop();r="".concat(x.output).concat(x.delimString.substr(0,x.count)).concat(r)}if(g>=2&&i[E].count>=2?(r='<span class="TMMark">'.concat(v).concat(v,'</span><strong class="TMStrong">').concat(r,'</strong><span class="TMMark">').concat(v).concat(v,"</span>"),g-=2,i[E].count-=2):(r='<span class="TMMark">'.concat(v,'</span><em class="TMEm">').concat(r,'</em><span class="TMMark">').concat(v,"</span>"),g-=1,i[E].count-=1),0==i[E].count){var w=i.pop();r="".concat(w.output).concat(r),E--}}else E--;return g&&k&&(i.push({delimiter:v,delimString:m,count:g,output:r}),r="",g=0),g&&(r="".concat(r).concat(m.substr(0,g))),a+=d[0].length,"continue|outer"}if(d=/^~~/.exec(o)){for(var A=!1,S=i.length-1;!A&&S>=0;)if("~"==i[S].delimiter){for(;S<i.length-1;){var $=i.pop();r="".concat($.output).concat($.delimString.substr(0,$.count)).concat(r)}r='<span class="TMMark">~~</span><del class="TMStrikethrough">'.concat(r,'</del><span class="TMMark">~~</span>');var L=i.pop();r="".concat(L.output).concat(r),A=!0}else S--;return A||(i.push({delimiter:"~",delimString:"~~",count:2,output:r}),r=""),a+=d[0].length,o=o.substr(d[0].length),"continue|outer"}if(d=jh.default.regexp.exec(o))return o=o.substr(d[0].length),a+=d[0].length,r+=jh.default.replacement.replace(/\$([1-9])/g,(function(e,t){return Yh(d[t])})),"continue|outer";throw"Infinite loop!"};o;)s();for(;i.length;){var u=i.pop();r="".concat(u.output).concat(u.delimString.substr(0,u.count)).concat(r)}return r}},{key:"clearDirtyFlag",value:function(){this.lineDirty=new Array(this.lines.length);for(var e=0;e<this.lineDirty.length;e++)this.lineDirty[e]=!1}},{key:"updateLineContents",value:function(){var e=this.e.childElementCount-this.lines.length;if(e){for(var t=0;t<=this.lines.length&&t<=this.lineElements.length&&this.lineElements[t]&&this.lines[t]==this.lineElements[t].textContent;)t++;for(var n=-1;-n<this.lines.length&&-n<this.lineElements.length&&this.lines[this.lines.length+n]==this.lineElements[this.lineElements.length+n].textContent;)n--;var r=this.lines.length+n+1-t;r<-e&&(r=-e),r<0&&(r=0);for(var i=[],a=0;a<r+e;a++)i.push(this.lineElements[t+a].textContent);this.spliceLines(t,r,i,!1)}else for(var o=0;o<this.lineElements.length;o++){var s=this.lineElements[o].textContent;this.lines[o]!==s&&(this.lines[o]=s,this.lineDirty[o]=!0)}}},{key:"processNewParagraph",value:function(e){if(e){this.updateLineContents();var t=!1,n=e.col>0?e.row:e.row-1;switch(this.lineTypes[n]){case"TMUL":t="TMUL";break;case"TMOL":t="TMOL";break;case"TMIndentedCode":t="TMIndentedCode"}var r=this.lines[e.row].replace(/\n\n$/,"\n").split(/(?:\r\n|\n|\r)/);if(1!=r.length){if(this.spliceLines(e.row,1,r,!0),e.row++,e.col=0,t){var i=Hh[t].regexp.exec(this.lines[e.row-1]);i&&(i[2]?("TMOL"==t&&(i[1]=i[1].replace(/\d{1,9}/,(function(e){return parseInt(e[0])+1}))),this.lines[e.row]="".concat(i[1]).concat(this.lines[e.row]),this.lineDirty[e.row]=!0,e.col=i[1].length):(this.lines[e.row-1]="",this.lineDirty[e.row-1]=!0))}this.updateFormatting()}else this.updateFormatting()}}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=window.getSelection(),n=e?t.anchorNode:t.focusNode;if(!n)return null;var r=n.nodeType===Node.TEXT_NODE?e?t.anchorOffset:t.focusOffset:0;if(n==this.e)return{row:0,col:r};var i=this.computeColumn(n,r);if(null===i)return null;for(var a=n;a.parentElement!=this.e;)a=a.parentElement;var o=0;if(!a.dataset||!a.dataset.lineNum||a.previousSibling&&a.previousSibling.dataset.lineNum==a.dataset.lineNum)for(;a.previousSibling;)o++,a=a.previousSibling;else o=parseInt(a.dataset.lineNum);return{row:o,col:i,node:n}}},{key:"computeColumn",value:function(e,t){for(var n=e,r=t;n&&n.parentNode!=this.e;)n=n.parentNode;if(null==n)return null;for(n=e;n.parentNode!=this.e;)n.previousSibling?r+=(n=n.previousSibling).textContent.length:n=n.parentNode;return r}},{key:"computeNodeAndOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e>=this.lineElements.length&&(e=this.lineElements.length-1,t=this.lines[e].length),t>this.lines[e].length&&(t=this.lines[e].length);for(var r=this.lineElements[e],i=r.firstChild,a=!1,o={node:r.firstChild?r.firstChild:r,offset:0};i!=r;){if(!a&&i.nodeType===Node.TEXT_NODE)if(i.nodeValue.length>=t){if(!n||i.nodeValue.length!=t)return{node:i,offset:t};o={node:i,offset:t},t=0}else t-=i.nodeValue.length;!a&&i.firstChild?i=i.firstChild:i.nextSibling?(a=!1,i=i.nextSibling):(a=!0,i=i.parentNode)}return o}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=document.createRange(),r=this.computeNodeAndOffset(e.row,e.col,t&&t.row==e.row&&t.col>e.col),i=r.node,a=r.offset,o=null,s=null;if(t&&(t.row!=e.row||t.col!=e.col)){var u=this.computeNodeAndOffset(t.row,t.col,e.row==t.row&&e.col>t.col),l=u.node,c=u.offset;o=l,s=c}o?n.setStart(o,s):n.setStart(i,a),n.setEnd(i,a);var h=window.getSelection();h.removeAllRanges(),h.addRange(n)}}},{key:"handleInputEvent",value:function(e){var t=this.getSelection();if("insertParagraph"!=e.inputType&&"insertLineBreak"!=e.inputType||!t){if(this.e.firstChild){for(var n=this.e.firstChild;n;n=n.nextSibling)if(3!=n.nodeType||"DIV"!=n.tagName){var r=document.createElement("div");this.e.insertBefore(r,n),this.e.removeChild(n),r.appendChild(n)}}else this.e.innerHTML='<div class="TMBlankLine"><br></div>';this.updateLineContentsAndFormatting()}else this.clearDirtyFlag(),this.processNewParagraph(t);t&&this.setSelection(t),this.fireChange()}},{key:"handleSelectionChangeEvent",value:function(){this.fireSelection()}},{key:"spliceLines",value:function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(o)for(var s=0;s<i;s++)this.e.removeChild(this.e.childNodes[e]);for(var l=[],c=[],h=0;h<a.length;h++)l.push(""),c.push(!0),o&&(this.e.childNodes[e]?this.e.insertBefore(document.createElement("div"),this.e.childNodes[e]):this.e.appendChild(document.createElement("div")));(t=this.lines).splice.apply(t,[e,i].concat(u(a))),(n=this.lineTypes).splice.apply(n,[e,i].concat(l)),(r=this.lineDirty).splice.apply(r,[e,i].concat(c))}},{key:"handlePaste",value:function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");this.paste(t)}},{key:"paste",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r||(r=this.getSelection(!0)),i||(i=this.getSelection(!1)),i||(i={row:this.lines.length-1,col:this.lines[this.lines.length-1].length}),r||(r=i),r.row<i.row||r.row==i.row&&r.col<=i.col?(t=r,n=i):(t=i,n=r);var a=e.split(/(?:\r\n|\r|\n)/),o=this.lines[t.row].substr(0,t.col),s=this.lines[n.row].substr(n.col);a[0]=o.concat(a[0]);var u=a[a.length-1].length;a[a.length-1]=a[a.length-1].concat(s),this.spliceLines(t.row,1+n.row-t.row,a),i.row=t.row+a.length-1,i.col=u,this.updateFormatting(),this.setSelection(i),this.fireChange()}},{key:"computeCommonAncestor",value:function(e,t){if(!e||!t)return null;if(e==t)return e;var n,r=function(e){for(var t=[];e;)t.unshift(e),e=e.parentNode;return t},i=r(e),a=r(t);if(i[0]!=a[0])return null;for(n=0;i[n]==a[n];n++);return i[n-1]}},{key:"computeEnclosingMarkupNode",value:function(e,t,n){var r=null;if(!e)return null;if(t){if(e.row!=t.row)return null;r=this.computeCommonAncestor(e.node,t.node)}else r=e.node;if(!r)return null;for(;r!=this.e;){if(r.className&&r.className.includes(n))return r;r=r.parentNode}return null}},{key:"getCommandState",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={};if(n||(n=this.getSelection(!1)),r||(r=this.getSelection(!0)),!n){for(var a in Gh)i[a]=null;return i}for(var o in r||(r=n),r.row<n.row||r.row==n.row&&r.col<n.col?(e=r,t=n):(e=n,t=r),t.row>e.row&&0==t.col&&(t.row--,t.col=this.lines[t.row].length),Gh)if("inline"==Gh[o].type&&(n&&n.row==r.row&&this.isInlineFormattingAllowed(n,r)?i[o]=!!this.computeEnclosingMarkupNode(n,r,Gh[o].className)||n.col==r.col&&!!this.lines[n.row].substr(0,n.col).match(Gh[o].unset.prePattern)&&!!this.lines[n.row].substr(n.col).match(Gh[o].unset.postPattern):i[o]=null),"line"==Gh[o].type)if(n){for(var s=this.lineTypes[e.row]==Gh[o].className,u=e.row;u<=t.row;u++)if(this.lineTypes[u]==Gh[o].className!=s){s=null;break}i[o]=s}else i[o]=null;return i}},{key:"setCommandState",value:function(e,t){if("inline"==Gh[e].type){var r=this.getSelection(!0),i=this.getSelection(!1);if(r||(r=i),!r)return;if(r.row!=i.row)return;if(!this.isInlineFormattingAllowed(i,r))return;var a=this.computeEnclosingMarkupNode(i,r,Gh[e].className);if(this.clearDirtyFlag(),a){this.lineDirty[i.row]=!0;var o=this.computeColumn(a,0),s=a.textContent.length,u=this.lines[i.row].substr(0,o).replace(Gh[e].unset.prePattern,""),l=this.lines[i.row].substr(o,s),c=this.lines[i.row].substr(o+s).replace(Gh[e].unset.postPattern,"");this.lines[i.row]=u.concat(l,c),r.col=u.length,i.col=r.col+s,this.updateFormatting(),this.setSelection(i,r)}else if(i.col==r.col&&this.lines[i.row].substr(0,i.col).match(Gh[e].unset.prePattern)&&this.lines[i.row].substr(i.col).match(Gh[e].unset.postPattern)){this.lineDirty[i.row]=!0;var h=this.lines[i.row].substr(0,i.col).replace(Gh[e].unset.prePattern,""),p=this.lines[i.row].substr(i.col).replace(Gh[e].unset.postPattern,"");this.lines[i.row]=h.concat(p),i.col=r.col=h.length,this.updateFormatting(),this.setSelection(i,r)}else{var f=i.col<r.col?{startCol:i.col,endCol:r.col}:{startCol:r.col,endCol:i.col},d=f.startCol,g=f.endCol,m=this.lines[i.row].substr(d,g-d).match(n(/^(\s*).*\S(\s*)$/,{leading:1,trailing:2}));m&&(d+=m.groups.leading.length,g-=m.groups.trailing.length),i.col=d,r.col=g,this.wrapSelection(Gh[e].set.pre,Gh[e].set.post,i,r)}}else if("line"==Gh[e].type){var v=this.getSelection(!0),y=this.getSelection(!1);if(v||(v=y),!y)return;this.clearDirtyFlag();var M=v.row>y.row?y:v,T=v.row>y.row?v:y;T.row>M.row&&0==T.col&&T.row--;for(var b=M.row;b<=T.row;b++)t&&this.lineTypes[b]!=Gh[e].className&&(this.lines[b]=this.lines[b].replace(Gh[e].set.pattern,Gh[e].set.replacement.replace("$#",b-M.row+1)),this.lineDirty[b]=!0),t||this.lineTypes[b]!=Gh[e].className||(this.lines[b]=this.lines[b].replace(Gh[e].unset.pattern,Gh[e].unset.replacement),this.lineDirty[b]=!0);this.updateFormatting(),this.setSelection({row:T.row,col:this.lines[T.row].length},{row:M.row,col:0})}}},{key:"isInlineFormattingAllowed",value:function(){var e=window.getSelection();if(!e)return!1;if(e.isCollapsed&&3==e.focusNode.nodeType&&e.focusOffset==e.focusNode.nodeValue.length){var t;for(t=e.focusNode;t&&null==t.nextSibling;t=t.parentNode);if(t&&t.nextSibling.className&&t.nextSibling.className.includes("TMInlineFormatted"))return!0}var n=this.computeCommonAncestor(e.focusNode,e.anchorNode);if(!n)return!1;for(;n&&n!=this.e;){if(n.className&&(n.className.includes("TMInlineFormatted")||n.className.includes("TMBlankLine")))return!0;n=n.parentNode}return!1}},{key:"wrapSelection",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n||(n=this.getSelection(!1)),r||(r=this.getSelection(!0)),n&&r&&n.row==r.row){this.lineDirty[n.row]=!0;var i=n.col<r.col?n.col:r.col,a=n.col<r.col?r.col:n.col,o=this.lines[n.row].substr(0,i).concat(e),s=a==i?"":this.lines[n.row].substr(i,a-i),u=t.concat(this.lines[n.row].substr(a));this.lines[n.row]=o.concat(s,u),r.col=o.length,n.col=r.col+s.length,this.updateFormatting(),this.setSelection(n,r)}}},{key:"toggleCommandState",value:function(e){this.lastCommandState||(this.lastCommandState=this.getCommandState()),this.setCommandState(e,!this.lastCommandState[e])}},{key:"fireChange",value:function(){if(this.textarea||this.listeners.change.length){var e=this.getContent();this.textarea&&(this.textarea.value=e);var t,n=h(this.listeners.change);try{for(n.s();!(t=n.n()).done;){(0,t.value)({content:e,linesDirty:this.linesDirty})}}catch(e){n.e(e)}finally{n.f()}}}},{key:"fireSelection",value:function(){if(this.listeners.selection&&this.listeners.selection.length){var e=this.getSelection(!1),t=this.getSelection(!0),n=this.getCommandState(e,t);this.lastCommandState?Object.assign(this.lastCommandState,n):this.lastCommandState=Object.assign({},n);var r,i=h(this.listeners.selection);try{for(i.s();!(r=i.n()).done;){(0,r.value)({focus:e,anchor:t,commandState:this.lastCommandState})}}catch(e){i.e(e)}finally{i.f()}}}},{key:"addEventListener",value:function(e,t){e.match(/^(?:change|input)$/i)&&this.listeners.change.push(t),e.match(/^(?:selection|selectionchange)$/i)&&this.listeners.selection.push(t)}}]),e}();e.CommandBar=ws,e.Editor=Xh,Object.defineProperty(e,"__esModule",{value:!0})}));